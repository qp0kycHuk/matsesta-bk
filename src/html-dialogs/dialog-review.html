<div class="dialog-review">
  <div class="p-7 px-4 bg-l2">
    <div class="title text-center">Оставьте отзыв</div>
  </div>
  <form id="reviews-form" class="py-6 px-4 sm:p-10">
    <div class="grid md:grid-cols-2 gap-y-6 gap-16">
      <div>
        <label class="relative">
          <div class="text-sm mb-2 font-semibold">Ваше имя</div>
          <div class="relative">
            <div class="absolute left-0 h-full pointer-events-none flex items-center pl-4">
              <c-icon class="icon text-2xl opacity-40" href="img/icons.svg#user-contur"></c-icon>
            </div>
            <input type="text" class="input rounded-xl w-full pl-12" placeholder="Напишите имя...">
          </div>
        </label>
        <div class="relative mt-4">
          <div class="text-sm mb-2 font-semibold">Ваш город </div>
          <div class="relative">
            <input type="text" class="input rounded-xl w-full pl-12" placeholder="Напишите город...">
            <div class="absolute left-0 top-0 h-full pointer-events-none flex items-center pl-4">
              <c-icon class="icon text-2xl opacity-40" href="img/icons.svg#location-contur"></c-icon>
            </div>
          </div>
        </div>
        <label class="relative mt-8">
          <div class="text-sm mb-2 font-semibold">Ваш отзыв</div>
          <div class="relative">
            <textarea class="input rounded-xl w-full h-48 resize-none" placeholder="Напишите отзыв"></textarea>
          </div>
        </label>
        <label class="relative mt-4">
          <div class="text-sm mb-2 font-semibold">Ссылка на видео Youtube (не обязательно)</div>
          <div class="relative">
            <div class="absolute left-0 h-full pointer-events-none flex items-center pl-4">
              <c-icon class="icon text-2xl opacity-40" href="img/icons.svg#circle-play"></c-icon>
            </div>
            <input type="text" class="input rounded-xl w-full pl-12" placeholder="Ссылка...">
          </div>
        </label>
      </div>
      <div class="flex flex-col max-md">
        <div class="rating-field">
          <div class="text-xl mb-2 font-semibold">Оцените нас</div>
          <div class="flex">
            <label class="rating-field-item flex-grow">
              <input type="radio" name="rating" hidden value="1">
              <c-icon class="icon text-5xl mx-auto" href="img/icons.svg#rating-star"></c-icon>
            </label>
            <label class="rating-field-item flex-grow">
              <input type="radio" name="rating" hidden value="2">
              <c-icon class="icon text-5xl mx-auto" href="img/icons.svg#rating-star"></c-icon>
            </label>
            <label class="rating-field-item flex-grow">
              <input type="radio" name="rating" hidden value="3">
              <c-icon class="icon text-5xl mx-auto" href="img/icons.svg#rating-star"></c-icon>
            </label>
            <label class="rating-field-item flex-grow">
              <input type="radio" name="rating" hidden value="4">
              <c-icon class="icon text-5xl mx-auto" href="img/icons.svg#rating-star"></c-icon>
            </label>
            <label class="rating-field-item flex-grow">
              <input type="radio" name="rating" hidden checked value="5">
              <c-icon class="icon text-5xl mx-auto" href="img/icons.svg#rating-star"></c-icon>
            </label>
          </div>
        </div>

        <div class="mt-11 font-semibold text-sm">
          Прикрепить фото
        </div>
        <c-uploader class="w-full max-w-80 mt-3 cursor-pointer rounded-base overflow-hidden block" name="avatar" delete-name="PERSONAL_PHOTO_del">
        </c-uploader>

      </div>
      <div>
        <button type="submit" class="btn btn-theme-fill rounded-full">Отправить</button>
      </div>
      <div>
        <label class="flex items-center gap-2 cursor-pointer  w-full">
          <input type="checkbox" class="checkbox rounded-lg bg-l3 cursor-pointer shrink-0">
          <div class="opacity-60 text-xs sm:text-sm">Согласие на получение рекламной продукции</div>
        </label>
      </div>
    </div>
  </form>
</div>

<script>
  document.getElementById('reviews-form').addEventListener('submit', (event) => {
    event.preventDefault()

    const formData = new FormData(event.target)

    const btn = event.target.querySelector('[type="submit"]')
    btn.disabled = true

    fetch('url', {
        body: formData,
        method: 'post'
      })
      .then((response) => response.json())
      .then((result) => {
        if (result.success) {
          Fancybox.modal.open('url-success')
        } else {
          Fancybox.modal.open('url-error')
        }

        btn.disabled = false
      })

  })
</script>